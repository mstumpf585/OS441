package basic;
import java.io.* ;
import java.net.* ;
import java.util.* ;

final class HttpRequest implements Runnable 
{
	final static String CRLF = "\r\n";
	Socket socket;
	
	//Constructor
	public HttpRequest(Socket socket) throws Exception
	{
		this.socket = socket;
	}

	//Implement the run() method of the Runnable interface.
	public void run()
	{
		try {
				processRequest();
			} catch (Exception e) {
				System.out.println(e);
			}
	}
	
	private void processRequest() throws Exception
	{
		InputStream is = this.socket.getInputStream();
		DataOutputStream os = new DataOutputStream(this.socket.getOutputStream());
		
		BufferedReader br = new BufferedReader(new InputStreamReader(is));
		
		String requestLine = br.readLine(CRLF); 
		System.out.println(); 
		System.out.println(requestLine);
		
		String headerLine = null;
		while((headerLine = br.readLine()).length() != 0){
			System.out.print(headerLine); 
		}
		
		br.close();
		is.close();
		os.close();
	}
}
